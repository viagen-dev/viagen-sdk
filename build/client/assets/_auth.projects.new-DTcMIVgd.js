import{w as L,a as T,r,j as e,L as k}from"./chunk-JZWAC4HX-IldEFHxZ.js";import{c}from"./utils-C8nBGPD0.js";const w=[{id:"react-router",name:"React Router",description:"Full-stack React with SSR, loaders, and actions",framework:"React"}],$=L(function(){const v=T(),[n,g]=r.useState(""),[o,h]=r.useState("template"),[m,S]=r.useState(w[0].id),[u,b]=r.useState(!1),[j,x]=r.useState(null),[a,C]=r.useState([]),[l,N]=r.useState(!1),[i,p]=r.useState(null),[s,P]=r.useState(null);r.useEffect(()=>{o==="import"&&a.length===0&&!l&&V()},[o]);const V=async()=>{N(!0),p(null);try{const t=await fetch("/api/vercel/projects?limit=50",{credentials:"include"});if(t.status===400){p("not_connected");return}if(!t.ok)throw new Error;const d=await t.json();C(d.projects)}catch{p("failed")}finally{N(!1)}},E=t=>{P(t),n||g(t.name)},y=async()=>{if(n.trim()){b(!0),x(null);try{const t={name:n.trim()};o==="template"?t.templateId=m:s&&(t.vercelProjectId=s.id,s.link?.org&&s.link?.repo&&(t.githubRepo=`${s.link.org}/${s.link.repo}`));const d=await fetch("/api/projects",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});if(!d.ok){const R=await d.json().catch(()=>null);x(R?.error??"Failed to create project");return}v("/projects")}catch{x("Something went wrong")}finally{b(!1)}}},f=n.trim().length>0&&(o==="template"||s!==null);return e.jsxs("div",{children:[e.jsxs("div",{className:"mb-8",children:[e.jsx(k,{to:"/projects",className:"mb-2 inline-block text-[0.8125rem] text-muted-foreground no-underline hover:text-foreground",children:"← Projects"}),e.jsx("h1",{className:"text-3xl font-semibold",children:"New Project"})]}),e.jsxs("div",{className:"mb-6",children:[e.jsx("label",{className:"mb-2 block text-sm font-medium text-foreground/70",children:"Project Name"}),e.jsx("input",{type:"text",value:n,onChange:t=>g(t.target.value),onKeyDown:t=>t.key==="Enter"&&f&&y(),placeholder:"my-app",className:"w-full rounded-md border border-input bg-background px-3 py-2.5 text-sm text-foreground placeholder:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring",autoFocus:!0})]}),e.jsxs("div",{className:"mb-6 flex gap-1 border-b border-border",children:[e.jsx("button",{onClick:()=>h("template"),className:c("-mb-px cursor-pointer border-b-2 border-transparent bg-transparent px-4 py-2.5 text-sm font-medium transition-colors",o==="template"?"border-foreground text-foreground":"text-muted-foreground hover:text-foreground"),children:"Start from Template"}),e.jsx("button",{onClick:()=>h("import"),className:c("-mb-px cursor-pointer border-b-2 border-transparent bg-transparent px-4 py-2.5 text-sm font-medium transition-colors",o==="import"?"border-foreground text-foreground":"text-muted-foreground hover:text-foreground"),children:"Import Existing"})]}),o==="template"&&e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"mb-4 text-[0.8125rem] text-muted-foreground",children:"Start with a pre-configured template. More coming soon."}),e.jsx("div",{className:"grid grid-cols-[repeat(auto-fill,minmax(240px,1fr))] gap-3",children:w.map(t=>e.jsxs("button",{onClick:()=>S(t.id),className:c("cursor-pointer rounded-lg border-2 bg-card p-5 text-left transition-colors",m===t.id?"border-foreground":"border-border hover:border-foreground/30"),children:[e.jsxs("div",{className:"mb-2 flex items-center gap-2",children:[e.jsx(I,{}),e.jsx("span",{className:"text-[0.9375rem] font-semibold",children:t.name}),m===t.id&&e.jsx("span",{className:"ml-auto text-sm font-bold text-foreground",children:"✓"})]}),e.jsx("p",{className:"text-[0.8125rem] leading-relaxed text-muted-foreground",children:t.description})]},t.id))})]}),o==="import"&&e.jsxs("div",{className:"mb-8",children:[e.jsx("p",{className:"mb-4 text-[0.8125rem] text-muted-foreground",children:"Import an existing project from Vercel."}),l&&e.jsx("p",{className:"py-4 text-sm text-muted-foreground",children:"Loading Vercel projects..."}),i==="not_connected"&&e.jsxs("div",{className:"rounded-lg border border-border p-6 text-center",children:[e.jsx("p",{className:"mb-3 text-sm text-muted-foreground",children:"Connect your Vercel account to import projects."}),e.jsx(k,{to:"/settings",className:"inline-flex items-center rounded-md border border-input px-4 py-2 text-[0.8125rem] font-medium text-foreground/70 no-underline transition-colors hover:bg-accent",children:"Go to Settings"})]}),i==="failed"&&e.jsx("p",{className:"py-4 text-sm text-destructive",children:"Failed to load Vercel projects."}),!l&&!i&&a.length===0&&e.jsx("p",{className:"py-4 text-sm text-muted-foreground",children:"No Vercel projects found."}),!l&&!i&&a.length>0&&e.jsx("div",{className:"max-h-[360px] overflow-auto",children:a.map(t=>e.jsx("button",{onClick:()=>E(t),className:c("mb-2 block w-full cursor-pointer rounded-md border-2 bg-transparent p-3 text-left transition-colors",s?.id===t.id?"border-foreground":"border-border hover:border-foreground/30"),children:e.jsxs("div",{className:"flex items-center justify-between",children:[e.jsxs("div",{children:[e.jsx("p",{className:"text-sm font-medium",children:t.name}),e.jsxs("p",{className:"text-xs text-muted-foreground",children:[t.framework??"No framework",t.link?` · ${t.link.org}/${t.link.repo}`:""]})]}),s?.id===t.id&&e.jsx("span",{className:"ml-auto text-sm font-bold text-foreground",children:"✓"})]})},t.id))})]}),j&&e.jsx("p",{className:"mb-4 text-[0.8125rem] text-destructive",children:j}),e.jsx("button",{onClick:y,disabled:!f||u,className:c("w-full cursor-pointer rounded-md bg-primary px-5 py-2.5 text-sm font-medium text-primary-foreground transition-opacity hover:bg-primary/90",(!f||u)&&"cursor-not-allowed opacity-50"),children:u?"Creating...":o==="template"?"Create Project":"Import Project"})]})});function I(){return e.jsxs("svg",{width:"20",height:"20",viewBox:"0 0 24 24",fill:"none",className:"shrink-0",children:[e.jsx("circle",{cx:"6",cy:"18",r:"3",fill:"currentColor"}),e.jsx("circle",{cx:"18",cy:"18",r:"3",fill:"currentColor"}),e.jsx("circle",{cx:"12",cy:"6",r:"3",fill:"currentColor"}),e.jsx("path",{d:"M12 9v3M9 16.5L7.5 15M15 16.5l1.5-1.5",stroke:"currentColor",strokeWidth:"1.5"})]})}export{$ as default};
